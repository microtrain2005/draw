var draw=function(){var t=document.querySelector("main").offsetWidth,e=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),r=n.getContext("2d"),o=n.getBoundingClientRect(),a=0,i=0;x1=0,y1=0,x2=0,y2=0,lx=!1,ly=!1,shape="",isDrawing=!1;var d="";return{setXY:function(t){lx=a,ly=i,a=t.clientX-o.left-n.offsetLeft,i=t.clientY-o.top-n.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+a,document.getElementById("trackY").innerHTML="Y: "+i},setStart:function(){x1=a,y1=i},setEnd:function(){x2=a,y2=i},setShape:function(t){shape=t},randColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},setStrokeColor:function(t){d=t},getStrokeColor:function(){return d.length>6?d:this.randColor()},setIsDrawing:function(t){isDrawing=t},getIsDrawing:function(){return isDrawing},draw:function(){r.restore(),"rectangle"===shape?this.drawRect():"line"===shape?this.drawLine():"circle"===shape?this.drawCircle():"path"===shape?this.drawPath():alert("Please choose a shape"),r.save()},drawRect:function(){r.strokeStyle=this.getStrokeColor(),r.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),r.fillRect(x1,y1,x2-x1,y2-y1),r.stroke()},drawLine:function(){r.strokeStyle=this.getStrokeColor(),r.beginPath(),r.moveTo(x1,y1),r.lineTo(x2,y2),r.stroke()},drawCircle:function(){r.strokeStyle=this.getStrokeColor(),r.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16);let t=x1-x2,e=y1-y2,n=Math.sqrt(t*t+e*e);r.beginPath(),r.arc(x1,y1,n,0,2*Math.PI),r.stroke(),r.fill()},drawPath:function(){r.strokeStyle=this.getStrokeColor(),r.beginPath(),r.moveTo(lx,ly),r.lineTo(a,i),r.stroke()},getShape:function(){return shape},getCanvas:function(){return n},init:function(){n.width=t,n.height=e,document.querySelector("main").appendChild(n)}}}();draw.init(),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),draw.getCanvas().addEventListener("mousemove",function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),document.getElementById("strokeColor").addEventListener("change",function(){draw.setStrokeColor(document.getElementById("strokeColor").value)}),document.getElementById("randStrokeColor").addEventListener("change",function(){draw.setStrokeColor("")});